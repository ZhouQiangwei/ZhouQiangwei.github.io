<!DOCTYPE html><html class="theme-next pisces use-motion" lang="zh-CN"><head><script></script><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0"><link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Pisces",version:"6.3.0",sidebar:{position:"left",display:"always",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="allele meth web"><meta name="keywords" content="project,alleleweb"><meta property="og:type" content="article"><meta property="og:title" content="project_alleleweb"><meta property="og:url" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/index.html"><meta property="og:site_name" content="Qiangwei&#39;s blog"><meta property="og:description" content="allele meth web"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/static_nginx.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/image-20190319164036887.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/image-20190318102429380.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/image-20190318110528486.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/image-20190318123309210.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/image-20190319103124461.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/image-20190319102900921.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/image-20190319161459294.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/image-20190319162102042.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/alleleweb-log.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/image-20190321110908996.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/image-20190321115609628.png"><meta property="og:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/image-20190324145341353.png"><meta property="og:updated_time" content="2019-05-09T12:53:50.865Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="project_alleleweb"><meta name="twitter:description" content="allele meth web"><meta name="twitter:image" content="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/static_nginx.png"><link rel="alternate" href="/atom.xml" title="Qiangwei's blog" type="application/atom+xml"><link rel="canonical" href="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>project_alleleweb | Qiangwei's blog</title><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Qiangwei's blog</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">coding and learning</p></div><div class="site-nav-toggle"> <button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-guestbook"><a href="/guestbook/" rel="section"><i class="menu-item-icon fa fa-fw fa-newspaper-o"></i><br>留言板</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Qiangwei"><meta itemprop="description" content="顺风不浪 逆风不怂"><meta itemprop="image" content="/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Qiangwei's blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">project_alleleweb</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-04-03 15:39:33" itemprop="dateCreated datePublished" datetime="2019-04-03T15:39:33+08:00">2019-04-03</time> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2019-05-09 20:53:50" itemprop="dateModified" datetime="2019-05-09T20:53:50+08:00">2019-05-09</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/project/" itemprop="url" rel="index"><span itemprop="name">project</span></a></span></span> <span class="post-comments-count"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i></span> <a href="/2019/04/03/project-alleleweb/#comments" itemprop="discussionUrl"><span class="post-meta-item-text">评论数：</span><span class="post-comments-count valine-comment-count" data-xid="/2019/04/03/project-alleleweb/" itemprop="commentCount"></span></a></span> <span id="/2019/04/03/project-alleleweb/" class="leancloud_visitors" data-flag-title="project_alleleweb"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><div class="post-description">allele meth web</div></div></header><div class="post-body" itemprop="articleBody"><script src="/assets/js/APlayer.min.js"></script><h2 id="Allele-数据库"><a href="#Allele-数据库" class="headerlink" title="Allele 数据库"></a>Allele 数据库</h2><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><p>serch<br>物种 基因<br>输出结果：<br>热图1<br>在所有样本基因内的甲基化水平热图 （进化树）<br>在所有样本基因启动子的甲基化水平热图</p><h3 id="配置uwsgim-nginx"><a href="#配置uwsgim-nginx" class="headerlink" title="配置uwsgim nginx"></a>配置uwsgim nginx</h3><ol><li>alleleweb项目下<br>1.1 修改setting.py文件<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># SECURITY WARNING: don't run with debug turned on in production!</span></span><br><span class="line">DEBUG = False <span class="comment">#True 关闭开发模式，关闭后不再在项目目录下寻找静态文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### DIRS下添加项目模版路径 os.path.join(BASE_DIR, 'MethAelle/templates'),</span></span><br><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">'BACKEND'</span>: <span class="string">'django.template.backends.django.DjangoTemplates'</span>,</span><br><span class="line">        <span class="string">'DIRS'</span>: [</span><br><span class="line">             os.path.join(BASE_DIR, <span class="string">'MethAelle/templates'</span>),</span><br><span class="line">         ],</span><br><span class="line">        <span class="string">'APP_DIRS'</span>: True,</span><br><span class="line">        <span class="string">'OPTIONS'</span>: &#123;</span><br><span class="line">            <span class="string">'context_processors'</span>: [</span><br><span class="line">                <span class="string">'django.template.context_processors.debug'</span>,</span><br><span class="line">                <span class="string">'django.template.context_processors.request'</span>,</span><br><span class="line">                <span class="string">'django.contrib.auth.context_processors.auth'</span>,</span><br><span class="line">                <span class="string">'django.contrib.messages.context_processors.messages'</span>,</span><br><span class="line">            ],</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">## 静态文件</span></span><br><span class="line"><span class="comment"># Static files (CSS, JavaScript, Images)</span></span><br><span class="line"><span class="comment"># https://docs.djangoproject.com/en/1.10/howto/static-files/</span></span><br><span class="line">STATIC_URL = <span class="string">'/static'</span></span><br><span class="line">STATIC_ROOT = os.path.join(BASE_DIR, <span class="string">'collected_static'</span>) <span class="comment">## 将静态文件都整合到这里</span></span><br><span class="line">STATICFILES_DIRS = (</span><br><span class="line">    os.path.join(BASE_DIR, <span class="string">'MethAelle/static'</span>),</span><br><span class="line">    <span class="comment">## 这里是现在的静态文件所在的目录</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li></ol><p>首先建立文件夹： <code>mkdir collected_static</code><br>运行<code>python manage.py collectstatic</code>，在collected_static目录下将包含该项目的静态文件。</p><p>1.2 修改webapps目录下wsgim.py<br>这部分主要是添加公墓路径PROJECT_DIR，并未测试不加这部分是否能生效<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line"></span><br><span class="line">from os.path import join,dirname,abspath</span><br><span class="line"></span><br><span class="line">PROJECT_DIR = dirname(dirname(abspath(__file__)))<span class="comment">#3</span></span><br><span class="line">import sys <span class="comment"># 4</span></span><br><span class="line">sys.path.insert(0,PROJECT_DIR) <span class="comment"># 5</span></span><br><span class="line"></span><br><span class="line">from django.core.wsgi import get_wsgi_application</span><br><span class="line"></span><br><span class="line">os.environ.setdefault(<span class="string">"DJANGO_SETTINGS_MODULE"</span>, <span class="string">"webapps.settings"</span>)</span><br><span class="line"></span><br><span class="line">application = get_wsgi_application()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#os.environ["DJANGO_SETTINGS_MODULE"] = "blog.settings" # 7</span></span><br><span class="line"></span><br><span class="line">from django.core.wsgi import get_wsgi_application</span><br><span class="line">application = get_wsgi_application()</span><br></pre></td></tr></table></figure><p></p><p>1.3 创建myweb_uwsgi.ini，内容如下<br></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[uwsgi]</span><br><span class="line">socket = 218.199.68.149:8000</span><br><span class="line"><span class="built_in">chdir</span> = /home/qwzhou/www/alleleweb</span><br><span class="line"><span class="comment">##项目目录</span></span><br><span class="line"><span class="comment">#wsgi-file = webapps/wsgi.py</span></span><br><span class="line">module = webapps.wsgi:application</span><br><span class="line"><span class="comment">#MethAelle</span></span><br><span class="line"><span class="comment">#callable = MethAelle</span></span><br><span class="line">master = <span class="literal">true</span></span><br><span class="line">processes = 4</span><br><span class="line">threads = 2</span><br><span class="line">max-requests = 3000</span><br><span class="line">chmod-socket = 664</span><br><span class="line">vacuum = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">stats = %(<span class="built_in">chdir</span>)/uwsgi/uwsgi.status</span><br><span class="line">pidfile = %(<span class="built_in">chdir</span>)/uwsgi/uwsgi.pid</span><br><span class="line">daemonize = %(<span class="built_in">chdir</span>)/uwsgi/uwsgi.log</span><br></pre></td></tr></table></figure><p></p><p>首先创建uwsgi： <code>mkdir uwsgi</code><br>运行uwsgi：<br><code>uwsgi --ini myweb_uwsgi.ini</code><br>这一步运行后会在uwsgi目录下生成三个文件，日志文件、状态文件、运行id。<br>如果对项目做了修改，需要重新加载才能生效：<br><code>uwsgi --reload uwsgi/uwsgi.pid</code></p><ol start="2"><li>配置nginx.conf，修改部分如下<br>vi /etc/nginx/nginx.conf<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">user qwzhou;</span><br><span class="line"><span class="comment">## 用户名修改为所用账户，防止权限问题。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">### server</span></span><br><span class="line">    server &#123;</span><br><span class="line">        listen 80;</span><br><span class="line">        <span class="comment">#listen       [::]:80 default_server;</span></span><br><span class="line">        server_name localhost;</span><br><span class="line">        charset utf-8;</span><br><span class="line">        <span class="comment">#root         /usr/share/nginx/html;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># Load configuration files for the default server block.</span></span><br><span class="line">        <span class="comment">#include /etc/nginx/default.d/*.conf;</span></span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            uwsgi_pass 218.199.68.149:8000;</span><br><span class="line">            include /etc/nginx/uwsgi_params;</span><br><span class="line">        &#125;</span><br><span class="line">        location /static &#123;</span><br><span class="line">            expires 30d;</span><br><span class="line">            autoindex on;</span><br><span class="line">            <span class="comment">#add_header Cache-Control private;</span></span><br><span class="line">            <span class="built_in">alias</span> /home/qwzhou/www/alleleweb/collected_static;</span><br><span class="line">            <span class="comment">## 静态文件collect后的路径</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 404 /404.html;</span><br><span class="line">            location = /usr/share/nginx/html/40x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page 500 502 503 504 /50x.html;</span><br><span class="line">            location = /usr/share/nginx/html/50x.html &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li></ol><p>重启nginx：<br><code>sudo systemctl restart nginx</code></p><h3 id="django项目-http到https"><a href="#django项目-http到https" class="headerlink" title="django项目 http到https"></a>django项目 http到https</h3><p><a href="https://www.jianshu.com/p/655dd8bc3347" target="_blank" rel="noopener">https://www.jianshu.com/p/655dd8bc3347</a></p><h3 id="配置uwsgim-nginx-错误"><a href="#配置uwsgim-nginx-错误" class="headerlink" title="配置uwsgim nginx 错误"></a>配置uwsgim nginx 错误</h3><p>静态文件配置之后一直不生效，半天后发现/static处多写了一个匹配符：<br><img src="/2019/04/03/project-alleleweb/static_nginx.png" alt="static_nginx"></p><h3 id="js中替换src，刷新问题"><a href="#js中替换src，刷新问题" class="headerlink" title="js中替换src，刷新问题"></a>js中替换src，刷新问题</h3><p>经常发生替换后并未刷新，是因为浏览器保存了缓存图片，在生成图片时修改一下文件名即可。<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#alleleoutpic"</span>).attr(<span class="string">"src"</span>, <span class="string">"/static/MethAelle/"</span>+response);</span><br><span class="line">$(<span class="string">"#alleleoutpict"</span>).attr(<span class="string">"href"</span>, <span class="string">"/static/MethAelle/"</span>+response);</span><br></pre></td></tr></table></figure><p></p><h3 id="mysql-更改密码"><a href="#mysql-更改密码" class="headerlink" title="mysql 更改密码"></a>mysql 更改密码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">登陆数据库修改密码。</span><br><span class="line"></span><br><span class="line"><span class="comment"># mysql -uroot -p</span></span><br><span class="line"></span><br><span class="line">更新 mysql 库中 user 表的字段：</span><br><span class="line">MariaDB [(none)]&gt; use mysql;  </span><br><span class="line">MariaDB [mysql]&gt; UPDATE user SET password=password(<span class="string">'newpassword'</span>) WHERE user=<span class="string">'root'</span>;  </span><br><span class="line">MariaDB [mysql]&gt; flush privileges;  </span><br><span class="line">MariaDB [mysql]&gt; <span class="built_in">exit</span>;</span><br><span class="line"></span><br><span class="line">或者，使用 <span class="built_in">set</span> 指令设置root密码：</span><br><span class="line">MariaDB [(none)]&gt; SET password <span class="keyword">for</span> <span class="string">'root'</span>@<span class="string">'localhost'</span>=password(<span class="string">'newpassword'</span>);  </span><br><span class="line">MariaDB [(none)]&gt; <span class="built_in">exit</span>;</span><br></pre></td></tr></table></figure><h3 id="包含的物种和处理进程"><a href="#包含的物种和处理进程" class="headerlink" title="包含的物种和处理进程"></a>包含的物种和处理进程</h3><h3 id="Data-list"><a href="#Data-list" class="headerlink" title="Data list"></a>Data list</h3><p><img src="/2019/04/03/project-alleleweb/image-20190319164036887.png" alt="image-20190319164036887"></p><p>上图：</p><p>1 对应该gsm数据在genome browser可视化情况（DNA甲基化水平bw、或者基因表达水平bw）</p><p>2 DNA甲基化数据对应BatMeth2分析结果可视化情况。RNAseq还没想好，好像也不需要这个。（可以试着完成如下，如果是BS-Seq数据显示，如果是RNA-Seq数据那么不显示这个小图标）</p><p>3 DNA甲基化数据对应等位差异DNA甲基化（链接到具体位置表、在每条染色体上的分布饼状图/柱状图、在基因组上的密度分布等）</p><p>RNAseq数据对应等位差异表达基因（连接到具体基因表）</p><p>4 sra list</p><h3 id="测试转bigwig格式"><a href="#测试转bigwig格式" class="headerlink" title="测试转bigwig格式"></a>测试转bigwig格式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk -v OFS=<span class="string">"\t"</span> <span class="string">'$4=="CG"&#123;print $1,$2,$2,$3$7&#125;'</span> GSM1634321.methratio.txt &gt; tt.bedgragh</span><br><span class="line">[16:06:06] qwzhou@mn02:~/project/Allele_Web/Cordyceps_militaris/GSE66919/BS-Seq/GSM1634321 :</span><br><span class="line">$ ../../../../bedGraphToBigWig tt.bedgragh ~/project/Genome/CM01/GCF_000225605.1_CmilitarisCM01_v01_genomic.fa.len myBigWig.bw</span><br></pre></td></tr></table></figure><p>成功</p><h3 id="RNAseq-分析流程"><a href="#RNAseq-分析流程" class="headerlink" title="RNAseq 分析流程"></a>RNAseq 分析流程</h3><p>数据预处理（fastp）</p><p>比对 （hisat2）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># build index</span></span></span><br><span class="line">hisat2-build genomefile indexprefix</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#paired-end</span></span></span><br><span class="line">hisat2 -p 8 -x /index/location/indexprefix -1 R1.fq.gz  -2 R2.fq.gz -S outprefix.sam</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#single</span></span></span><br><span class="line">hisat2 -p 8 -x /index/location/indexprefix -U R1.fq.gz -S outprefix.sam</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#多个文件，可以用逗号间隔</span></span></span><br></pre></td></tr></table></figure><p> 等位差异分析 （ASEQ）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># gene.bed 格式：chr start end geneid</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># vcf.list 文件内包含snp文件路径，改文件通过与之对应的BS-Seq数据获得（bssnpcall）。</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># rnaseq.list 文件内包含RNAseq.sort.bam文件路径，例如在本文件夹下，则为./outprefix.sort.bam</span></span></span><br><span class="line">samtools sort -O BAM -@ 6 -o outprefix.sort.bam outprefix.sam</span><br><span class="line">ASEQ vcflist=vcf.list bamlist=rnaseq.list genes=gene.bed mode=ASE threads=6 mbq=20 mrq=20 mdc=10 pht=0.01 pft=0.01 out=./ASEQ/</span><br></pre></td></tr></table></figure><p> 基因表达水平分布 （deeptools，bam2bw）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bamCoverage -b outprefix.sort.bam -o outprefix.bw</span><br></pre></td></tr></table></figure><h3 id="BS-Seq数据分析"><a href="#BS-Seq数据分析" class="headerlink" title="BS-Seq数据分析"></a>BS-Seq数据分析</h3><p>BatMeth2流程分析 （DNA甲基化水平、DNA甲基化可视化结果、bw、）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># snp检测，线程不要超过四个</span></span></span><br><span class="line">bssnpcall -g genome -i sort.bam -o outprefix.vcf -p 4</span><br></pre></td></tr></table></figure><p>等位差异甲基化分析（methyhaplo）</p><p>等位差异DNA甲基化在染色体功能元件的分布（bedtools inersect | awk ‘gff id’ | sort -rn | head -6 &gt; barplot）</p><p>等位差异DNA甲基化在染色体上的密度分布（？）bedtools/deeptools</p><h2 id="Django-Mysql"><a href="#Django-Mysql" class="headerlink" title="Django Mysql"></a>Django Mysql</h2><h3 id="安装mysql-in-mac"><a href="#安装mysql-in-mac" class="headerlink" title="安装mysql in mac"></a>安装mysql in mac</h3><p><code>brew install mysql</code></p><h3 id="更改密码"><a href="#更改密码" class="headerlink" title="更改密码"></a>更改密码</h3><p><code>/usr/bin/mysql_secure_installation</code></p><h3 id="Enter-password-ERROR-2002-HY000-Can’t-connect-to-local-MySQL"><a href="#Enter-password-ERROR-2002-HY000-Can’t-connect-to-local-MySQL" class="headerlink" title="Enter password: ERROR 2002 (HY000): Can’t connect to local MySQL"></a>Enter password: ERROR 2002 (HY000): Can’t connect to local MySQL</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqld stop</span><br><span class="line">mysql.server restart</span><br></pre></td></tr></table></figure><h3 id="安装pymysql"><a href="#安装pymysql" class="headerlink" title="安装pymysql"></a>安装pymysql</h3><p><code>pip install pymysql</code></p><h3 id="修改settings-py"><a href="#修改settings-py" class="headerlink" title="修改settings.py"></a>修改settings.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Database</span></span><br><span class="line"><span class="comment"># https://docs.djangoproject.com/en/2.0/ref/settings/#databases</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 数据库配置 默认的数据库为sqlite</span></span><br><span class="line"><span class="comment"># DATABASES = &#123;</span></span><br><span class="line"><span class="comment">#  'default': &#123;</span></span><br><span class="line"><span class="comment">#   'ENGINE': 'django.db.backends.sqlite3',</span></span><br><span class="line"><span class="comment">#   'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),</span></span><br><span class="line"><span class="comment">#  &#125;</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br><span class="line">DATABASES = &#123;</span><br><span class="line"> <span class="string">'default'</span>: &#123;</span><br><span class="line">  <span class="string">'ENGINE'</span>: <span class="string">'django.db.backends.mysql'</span>, <span class="comment"># 数据库引擎</span></span><br><span class="line">  <span class="string">'NAME'</span>: <span class="string">'django_mysql'</span>, <span class="comment"># 数据库名</span></span><br><span class="line">  <span class="string">'USER'</span>: <span class="string">'root'</span>, <span class="comment"># 账号</span></span><br><span class="line">  <span class="string">'PASSWORD'</span>: <span class="string">'root'</span>, <span class="comment"># 密码</span></span><br><span class="line">  <span class="string">'HOST'</span>: <span class="string">'127.0.0.1'</span>, <span class="comment"># HOST</span></span><br><span class="line">  <span class="string">'POST'</span>: <span class="number">3306</span>, <span class="comment"># 端口</span></span><br><span class="line"> </span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="配置init-py"><a href="#配置init-py" class="headerlink" title="配置init.py"></a>配置init.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">setting中的配置默认为sqlite3数据库 当需要修改成MySql时</span></span><br><span class="line"><span class="string">并且在setting.py的同级目录的__init__.py 加入如下配置</span></span><br><span class="line"><span class="string">否则会报错： Error loading MySQLdb module.</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure><h3 id="在app文件的models-py文件中-创建数据表（GSEid）"><a href="#在app文件的models-py文件中-创建数据表（GSEid）" class="headerlink" title="在app文件的models.py文件中 创建数据表（GSEid）"></a>在app文件的models.py文件中 创建数据表（GSEid）</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string"> 该类是用来生成数据库的 必须要继承models.Model</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GSMid</span><span class="params">(models.Model)</span>:</span></span><br><span class="line">	<span class="string">"""</span></span><br><span class="line"><span class="string">	创建如下几个表的字段</span></span><br><span class="line"><span class="string">	"""</span></span><br><span class="line">	<span class="comment"># GEO ID primary_key=True: 该字段为主键</span></span><br><span class="line">	Geoid = models.CharField(<span class="string">'geoid'</span>, primary_key=<span class="keyword">True</span>, max_length=<span class="number">15</span>)</span><br><span class="line">	<span class="comment"># 碱基数目 字符串 最大长度20</span></span><br><span class="line">	Bases = models.CharField(<span class="string">'Bases'</span>, max_length=<span class="number">20</span>)</span><br><span class="line">	<span class="comment"># 测序设备 整数 null=False, 表示该字段不能为空</span></span><br><span class="line">	Instrument = models.CharField(<span class="string">'Instrument'</span>, max_length=<span class="number">50</span>)</span><br><span class="line">	<span class="comment"># Layout 布尔类型 默认True: 男生 False:女生</span></span><br><span class="line">	Layout = models.CharField(<span class="string">'Layout'</span>, max_length=<span class="number">15</span>)</span><br><span class="line">	<span class="comment"># Library strategy unique=True 该字段唯一</span></span><br><span class="line">	Library = models.CharField(<span class="string">'Library'</span>, max_length=<span class="number">15</span>)</span><br><span class="line">	<span class="comment"># Organism </span></span><br><span class="line">	Organism = models.CharField(<span class="string">'Organism'</span>, max_length=<span class="number">50</span>)</span><br><span class="line">	<span class="comment"># Organization</span></span><br><span class="line">	Organization = models.CharField(<span class="string">'Organization'</span>, max_length=<span class="number">50</span>)</span><br><span class="line">	<span class="comment"># SRA </span></span><br><span class="line">	sra = models.CharField(<span class="string">'SRA list'</span>, max_length=<span class="number">50</span>)</span><br><span class="line">	<span class="comment"># Source</span></span><br><span class="line">	Source = models.CharField(<span class="string">'Source'</span>, max_length=<span class="number">100</span>)</span><br><span class="line">	<span class="comment"># Title</span></span><br><span class="line">	Title = models.CharField(<span class="string">'Title'</span>, max_length=<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"> 	<span class="comment"># 指定表名 不指定默认APP名字——类名(app_demo_Student)</span></span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">		db_table = <span class="string">'gsmid'</span></span><br></pre></td></tr></table></figure><h3 id="在利用models-py文件生成数据库表之前，手动的先创建数据库"><a href="#在利用models-py文件生成数据库表之前，手动的先创建数据库" class="headerlink" title="在利用models.py文件生成数据库表之前，手动的先创建数据库"></a>在利用models.py文件生成数据库表之前，手动的先创建数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database django_mysql;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br></pre></td></tr></table></figure><h3 id="终端运行命令"><a href="#终端运行命令" class="headerlink" title="终端运行命令"></a>终端运行命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations</span><br><span class="line">python manage.py migrate</span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line">Operations to perform:</span><br><span class="line">  Apply all migrations: MethAelle, admin, auth, contenttypes, sessions</span><br><span class="line">Running migrations:</span><br><span class="line">  Applying MethAelle.0001_initial... OK</span><br><span class="line">  Applying MethAelle.0002_gsmid... OK</span><br><span class="line">  Applying MethAelle.0003_auto_20190317_0524... OK</span><br><span class="line">  Applying contenttypes.0001_initial... OK</span><br><span class="line">  Applying auth.0001_initial... OK</span><br><span class="line">  Applying admin.0001_initial... OK</span><br><span class="line">  Applying admin.0002_logentry_remove_auto_add... OK</span><br><span class="line">  Applying contenttypes.0002_remove_content_type_name... OK</span><br><span class="line">  Applying auth.0002_alter_permission_name_max_length... OK</span><br><span class="line">  Applying auth.0003_alter_user_email_max_length... OK</span><br><span class="line">  Applying auth.0004_alter_user_username_opts... OK</span><br><span class="line">  Applying auth.0005_alter_user_last_login_null... OK</span><br><span class="line">  Applying auth.0006_require_contenttypes_0002... OK</span><br><span class="line">  Applying auth.0007_alter_validators_add_error_messages... OK</span><br><span class="line">  Applying auth.0008_alter_user_username_max_length... OK</span><br><span class="line">  Applying sessions.0001_initial... OK</span><br></pre></td></tr></table></figure><h3 id="查看我们的django-mysql数据库，其中GSMid就是用models文件生成的表，其他的表是项目自动生成的，可以先不用管"><a href="#查看我们的django-mysql数据库，其中GSMid就是用models文件生成的表，其他的表是项目自动生成的，可以先不用管" class="headerlink" title="查看我们的django_mysql数据库，其中GSMid就是用models文件生成的表，其他的表是项目自动生成的，可以先不用管"></a>查看我们的django_mysql数据库，其中GSMid就是用models文件生成的表，其他的表是项目自动生成的，可以先不用管</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use django_mysql</span><br><span class="line">Database changed</span><br><span class="line"> </span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+----------------------------+</span><br><span class="line">| Tables_in_django_mysql     |</span><br><span class="line">+----------------------------+</span><br><span class="line">| auth_group                 |</span><br><span class="line">| auth_group_permissions     |</span><br><span class="line">| auth_permission            |</span><br><span class="line">| auth_user                  |</span><br><span class="line">| auth_user_groups           |</span><br><span class="line">| auth_user_user_permissions |</span><br><span class="line">| django_admin_log           |</span><br><span class="line">| django_content_type        |</span><br><span class="line">| django_migrations          |</span><br><span class="line">| django_session             |</span><br><span class="line">| GSMid                      |</span><br><span class="line">| MethAelle_item             |</span><br><span class="line">+----------------------------+</span><br><span class="line">12 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure><h3 id="表结构-desc查看表结构"><a href="#表结构-desc查看表结构" class="headerlink" title="表结构,desc查看表结构"></a>表结构,desc查看表结构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; desc GSMid;</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">| Field        | Type         | Null | Key | Default | Extra |</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">| Geoid        | varchar(15)  | NO   | PRI | NULL    |       |</span><br><span class="line">| Bases        | varchar(20)  | NO   |     | NULL    |       |</span><br><span class="line">| Instrument   | varchar(50)  | NO   |     | NULL    |       |</span><br><span class="line">| Layout       | varchar(15)  | NO   |     | NULL    |       |</span><br><span class="line">| Library      | varchar(15)  | NO   |     | NULL    |       |</span><br><span class="line">| Organism     | varchar(50)  | NO   |     | NULL    |       |</span><br><span class="line">| Organization | varchar(50)  | NO   |     | NULL    |       |</span><br><span class="line">| sra          | varchar(50)  | NO   |     | NULL    |       |</span><br><span class="line">| Source       | varchar(100) | NO   |     | NULL    |       |</span><br><span class="line">| Title        | varchar(100) | NO   |     | NULL    |       |</span><br><span class="line">+--------------+--------------+------+-----+---------+-------+</span><br><span class="line">10 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure><p>至此Django利用models文件创建数据库表的功能已经完毕。</p><h3 id="接下来用代码的方式演示一下Django如何进行增删改查"><a href="#接下来用代码的方式演示一下Django如何进行增删改查" class="headerlink" title="接下来用代码的方式演示一下Django如何进行增删改查"></a>接下来用代码的方式演示一下Django如何进行增删改查</h3><h3 id="增加数据-views-py"><a href="#增加数据-views-py" class="headerlink" title="增加数据 (views.py)"></a>增加数据 (views.py)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> MethAelle.models <span class="keyword">import</span> GSMid</span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">插入list数据</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">loaddatalist</span><span class="params">(request)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, <span class="number">6</span>):</span><br><span class="line">        <span class="comment"># 从models文件中获取GSMid对象</span></span><br><span class="line">        gsmid = GSMid()</span><br><span class="line">        <span class="comment"># 给对象赋值</span></span><br><span class="line">        gsmid.Geoid = <span class="string">"GSM-"</span> + str(i)</span><br><span class="line">        gsmid.Bases = <span class="string">"1.5G"</span></span><br><span class="line">        gsmid.Instrument = <span class="string">"Illumina hiseq2000"</span></span><br><span class="line">        gsmid.Layout = <span class="string">"Paired"</span></span><br><span class="line">        gsmid.Library = <span class="string">"BS-seq"</span></span><br><span class="line">        gsmid.Organism=<span class="string">"Arabidopsis thaliana"</span></span><br><span class="line">        gsmid.Organization = <span class="string">"HZAU"</span></span><br><span class="line">        gsmid.sra = <span class="string">"srr01029-"</span> + str(i)</span><br><span class="line">        gsmid.Source = <span class="string">"seed-"</span> + str(i)</span><br><span class="line">        gsmid.Title = <span class="string">"Test1"</span></span><br><span class="line">        <span class="comment"># 插入数据</span></span><br><span class="line">        gsmid.save()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">'datalist load done!'</span>)</span><br></pre></td></tr></table></figure><h3 id="urls-py-文件中-urlpatterns中配置"><a href="#urls-py-文件中-urlpatterns中配置" class="headerlink" title="urls.py 文件中 urlpatterns中配置"></a>urls.py 文件中 urlpatterns中配置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url(<span class="string">r'^loaddatalist$'</span>, views.loaddatalist, name=<span class="string">"loaddatalist"</span>)</span><br></pre></td></tr></table></figure><h3 id="查看是否插入成功"><a href="#查看是否插入成功" class="headerlink" title="查看是否插入成功"></a>查看是否插入成功</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from GSMid;</span><br></pre></td></tr></table></figure><h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`&quot;&quot;&quot;``查询``&quot;&quot;&quot;``def` `find(request):`` ``#sql = &apos;select * from student&apos;`` ``# django 也可以执行原生的sql语句`` ``#result = Student.objects.raw(sql)` ` ``# 查询name = tom1的数据`` ``result ``=` `Student.objects.``filter``(name``=``&apos;tom1&apos;``)`` ``&quot;&quot;&quot;`` ``result为&lt;class &apos;django.db.models.query.QuerySet&apos;&gt;的对象`` ``需要进行数据处理`` ``&quot;&quot;&quot;`` ``arr ``=` `[]`` ``for` `i ``in` `result:``  ``content ``=` `&#123;``&apos;学号&apos;``: i.studentNum, ``&apos;姓名&apos;``: i.name, ``&apos;性别&apos;``: i.sex&#125;``  ``arr.append(content)`` ``print``(arr)`` ``print``(``type``(arr))`` ``return` `HttpResponse(arr)`</span><br></pre></td></tr></table></figure><h3 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&quot;&quot;&quot;</span><br><span class="line">删除</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">def delete(request, Geoid):</span><br><span class="line"> gsmid = GSMid.objects.get(Geoid=Geoid)</span><br><span class="line"> gsmid.delete()</span><br><span class="line"> return HttpResponse(&apos;删除成功.&apos;)</span><br></pre></td></tr></table></figure><p>settings.py中urlpatterns的配置如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">`url(r``&apos;^delete/(?P&lt;studentNum&gt;.+)&apos;``, views.delete)`</span><br></pre></td></tr></table></figure><h2 id="修改显示mysql到table"><a href="#修改显示mysql到table" class="headerlink" title="修改显示mysql到table"></a>修改显示mysql到table</h2><h3 id="修改views-py"><a href="#修改views-py" class="headerlink" title="修改views.py"></a>修改views.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">table</span><span class="params">(request)</span>:</span></span><br><span class="line">    gsmlist=GSMid.objects.all()  <span class="comment">#获取我们的数据库信息到names里</span></span><br><span class="line">    <span class="comment">#return render(request,'table.html',&#123;'form':table_form&#125;)</span></span><br><span class="line">    <span class="comment">#return render_to_response('MethAelle/table.html',locals()) #必须用这个return</span></span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'MethAelle/table.html'</span>, locals())</span><br></pre></td></tr></table></figure><h3 id="修改table-js"><a href="#修改table-js" class="headerlink" title="修改table.js"></a>修改table.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"ajax"</span>: <span class="string">"/static/MethAelle/data/objects.txt"</span>,  </span><br><span class="line">改为</span><br><span class="line"><span class="string">"ajax"</span>: <span class="string">""</span>, <span class="comment">//   /static/MethAelle/data/objects.txt</span></span><br><span class="line">        <span class="string">"columns"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"class"</span>:          <span class="string">"details-control"</span>,</span><br><span class="line">                <span class="string">"orderable"</span>:      <span class="literal">false</span>,</span><br><span class="line">                <span class="string">"data"</span>:           <span class="literal">null</span>,</span><br><span class="line">                <span class="string">"defaultContent"</span>: <span class="string">""</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Geoid"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"sra"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Library"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Source"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Layout"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Instrument"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Organization"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Organism"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Title"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Bases"</span> &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">"order"</span>: [[<span class="number">1</span>, <span class="string">'asc'</span>]]</span><br><span class="line">首先去掉本地显示文件</span><br></pre></td></tr></table></figure><h3 id="修改table-html"><a href="#修改table-html" class="headerlink" title="修改table.html"></a>修改table.html</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"example"</span> <span class="attr">class</span>=<span class="string">"display"</span> <span class="attr">style</span>=<span class="string">"width:100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>GEO ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>SRA<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Library<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Source<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Layout<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          	<span class="tag">&lt;<span class="name">th</span>&gt;</span>Bases<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          	<span class="tag">&lt;<span class="name">th</span>&gt;</span>Organization<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          	<span class="tag">&lt;<span class="name">th</span>&gt;</span>Instrument<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          	<span class="tag">&lt;<span class="name">th</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &#123;% for gsm in gsmlist %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Geoid&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.sra&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Library&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Source&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Layout&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">          	<span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Bases&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Organization&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Instrument&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Title&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>GEO ID<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>SRA<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Library<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Source<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>Layout<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          	<span class="tag">&lt;<span class="name">th</span>&gt;</span>Bases<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          	<span class="tag">&lt;<span class="name">th</span>&gt;</span>Organization<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          	<span class="tag">&lt;<span class="name">th</span>&gt;</span>Instrument<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">          	<span class="tag">&lt;<span class="name">th</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="参考：-https-www-jb51-net-article-151269-htm"><a href="#参考：-https-www-jb51-net-article-151269-htm" class="headerlink" title="参考： https://www.jb51.net/article/151269.htm"></a>参考： <a href="https://www.jb51.net/article/151269.htm" target="_blank" rel="noopener">https://www.jb51.net/article/151269.htm</a></h3><h2 id="navmenu"><a href="#navmenu" class="headerlink" title="navmenu"></a>navmenu</h2><h3 id="主页下拉菜单点击后背景变成灰色，设置为透明色（如下）"><a href="#主页下拉菜单点击后背景变成灰色，设置为透明色（如下）" class="headerlink" title="主页下拉菜单点击后背景变成灰色，设置为透明色（如下）"></a>主页下拉菜单点击后背景变成灰色，设置为透明色（如下）</h3><p><img src="/2019/04/03/project-alleleweb/image-20190318102429380.png" alt="image-20190318102429380"></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*navmenu*/</span></span><br><span class="line"><span class="selector-id">#methnavmenu</span><span class="selector-class">.navbar-default</span> <span class="selector-class">.navbar-nav</span> <span class="selector-class">.dropdown</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#methnavmenu</span><span class="selector-class">.navbar-default</span> <span class="selector-class">.navbar-nav</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#e7e7e705</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#methnavmenu</span><span class="selector-class">.navbar-default</span> <span class="selector-class">.navbar-nav</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#methnavmenu</span><span class="selector-class">.navbar-default</span> <span class="selector-class">.navbar-nav</span>&gt;<span class="selector-tag">li</span>&gt;<span class="selector-tag">a</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#20ae3d</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#e7e7e705</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#methnavmenu</span><span class="selector-class">.navbar-default</span> <span class="selector-class">.navbar-nav</span>&gt;<span class="selector-class">.open</span>&gt;<span class="selector-tag">a</span>,</span><br><span class="line"><span class="selector-id">#methnavmenu</span><span class="selector-class">.navbar-default</span> <span class="selector-class">.navbar-nav</span>&gt;<span class="selector-class">.open</span>&gt;<span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-id">#methnavmenu</span><span class="selector-class">.navbar-default</span> <span class="selector-class">.navbar-nav</span>&gt;<span class="selector-class">.open</span>&gt;<span class="selector-tag">a</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#20ae3d</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#e7e7e705</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实现三级菜单"><a href="#实现三级菜单" class="headerlink" title="实现三级菜单"></a>实现三级菜单</h3><p><img src="/2019/04/03/project-alleleweb/image-20190318110528486.png" alt="image-20190318110528486"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"dropdown"</span> <span class="attr">id</span>=<span class="string">"nav_table_menu"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'table' %&#125;"</span> <span class="attr">class</span>=<span class="string">"dropdown-toggle"</span> <span class="attr">data-toggle</span>=<span class="string">"dropdown"</span> <span class="attr">role</span>=<span class="string">"button"</span> <span class="attr">aria-haspopup</span>=<span class="string">"true"</span> <span class="attr">aria-expanded</span>=<span class="string">"false"</span>&gt;</span>Data List <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"caret"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- &lt;a href="&#123;% url 'table' %&#125;" role="button" &gt;Table &lt;span class="caret"&gt;&lt;/span&gt;&lt;/a&gt; --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"dropdown-menu"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"dropdown-submenu"</span>&gt;</span></span><br><span class="line">          <span class="comment">&lt;!--需要在css中添加submenu的格式，否则不显示下一级菜单--&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"dropdown-toggle"</span> <span class="attr">data-toggle</span>=<span class="string">"dropdown"</span>&gt;</span></span><br><span class="line">            Animals</span><br><span class="line">            <span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">"caret-right"</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--需要在css中添加caret格式，向右的箭头--&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"dropdown-menu"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Human<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Mouse<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'table' %&#125;"</span>&gt;</span>Arabidopsis thaliana<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* dropdown submenu*/</span></span><br><span class="line"><span class="selector-class">.dropdown-submenu</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dropdown-submenu</span> &gt; <span class="selector-class">.dropdown-menu</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">min-width</span>: <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: -<span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: -<span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">-webkit-border-radius</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">-moz-border-radius</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dropdown-submenu</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-class">.dropdown-menu</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bigd-dropup</span> <span class="selector-class">.dropdown-submenu</span> &gt; <span class="selector-class">.dropdown-menu</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>: auto;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: -<span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">-webkit-border-radius</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">-moz-border-radius</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dropdown-submenu</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">float</span>: right;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: -<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">border-color</span>: transparent;</span><br><span class="line">    <span class="attribute">border-left-color</span>: <span class="number">#ccc</span>;</span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">" "</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dropdown-submenu</span><span class="selector-pseudo">:hover</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:after</span> &#123;</span><br><span class="line">    <span class="attribute">border-left-color</span>: <span class="number">#fff</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dropdown-submenu</span><span class="selector-class">.bigd-pull-left</span> &#123;</span><br><span class="line">    <span class="attribute">float</span>: none</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.dropdown-submenu</span><span class="selector-class">.bigd-pull-left</span> &gt; <span class="selector-class">.dropdown-menu</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: -<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">-webkit-border-radius</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">-moz-border-radius</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">  <span class="comment">/*向右的箭头*/</span></span><br><span class="line"><span class="selector-class">.caret-right</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">4px</span> solid transparent;</span><br><span class="line">    <span class="attribute">border-left</span>: <span class="number">4px</span> solid <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">left</span>: auto;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">' '</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*三级菜单 done*/</span></span><br></pre></td></tr></table></figure><h3 id="主页添加描述内容"><a href="#主页添加描述内容" class="headerlink" title="主页添加描述内容"></a>主页添加描述内容</h3><p>主要问题：添加描述内容两边宽度（class=container），以及上下间隔（class=index）</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- end header --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"index"</span>&gt;</span> <span class="comment">&lt;!-- padding=15px --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span><br><span class="line">	  	<span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text-justify"</span> <span class="attr">style</span>=<span class="string">"font-size: 18px"</span>&gt;</span></span><br><span class="line">	  		The Allele-specific DNA Methylation databases (AlleleMeth) is a database that</span><br><span class="line">                integrates genome-wide DNA methylomes and Allele-specific DNA methylation across a variety of species and provides an interactive browser</span><br><span class="line">                for visualization of high-resolution DNA methylation data.</span><br><span class="line">	  	<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">	  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- panel --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel panel-primary"</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Index css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*home 预留间隔*/</span></span><br><span class="line"><span class="selector-class">.index</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">15px</span> <span class="number">15px</span> <span class="number">15px</span> <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>: inset <span class="number">0</span> <span class="number">3px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(0, 0, 0, .05);</span><br><span class="line">    <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">3px</span> <span class="number">6px</span> <span class="built_in">rgba</span>(0, 0, 0, .05);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="navbar-三级菜单选中颜色"><a href="#navbar-三级菜单选中颜色" class="headerlink" title="navbar 三级菜单选中颜色"></a>navbar 三级菜单选中颜色</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在dropdown-menu添加id，其实也可以统一添加类,去掉id，添加focuslist类--&gt;</span>  </span><br><span class="line">				<span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"dropdown-menu"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--animals--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"dropdown-submenu"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"dropdown-toggle"</span> <span class="attr">data-toggle</span>=<span class="string">"dropdown"</span>&gt;</span></span><br><span class="line">                Animals</span><br><span class="line">                <span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">"caret-right"</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              &lt;ul class="dropdown-menu focuslist" &lt;!--id="navbar_animals"--&gt; &gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'table' %&#125;"</span>&gt;</span>Human<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'table' %&#125;"</span>&gt;</span>Mouse<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--PLANT--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"dropdown-submenu"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"dropdown-toggle"</span> <span class="attr">data-toggle</span>=<span class="string">"dropdown"</span>&gt;</span></span><br><span class="line">                Plants</span><br><span class="line">                <span class="tag">&lt;<span class="name">b</span> <span class="attr">class</span>=<span class="string">"caret-right"</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">              &lt;ul class="dropdown-menu focuslist" &lt;!--id="navbar_plants"--&gt; &gt;</span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'table' %&#125;"</span>&gt;</span>Arabidopsis thaliana<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'table' %&#125;"</span>&gt;</span>Oryza<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!----&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* navbar 三级菜单选中颜色-绿色*/</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">#navbar_animals &gt; li &gt; a:hover,</span></span><br><span class="line"><span class="comment">#navbar_animals &gt; li &gt; a:focus,</span></span><br><span class="line"><span class="comment">#navbar_plants &gt; li &gt; a:hover,</span></span><br><span class="line"><span class="comment">#navbar_plants &gt; li &gt; a:focus &#123;</span></span><br><span class="line"><span class="comment">  color: #20ae3d;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="selector-class">.focuslist</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span>,</span><br><span class="line"><span class="selector-class">.focuslist</span> &gt; <span class="selector-tag">li</span> &gt; <span class="selector-tag">a</span><span class="selector-pseudo">:focus</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#20ae3d</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加位置标示"><a href="#添加位置标示" class="headerlink" title="添加位置标示"></a>添加位置标示</h3><p><img src="/2019/04/03/project-alleleweb/image-20190318123309210.png" alt="image-20190318123309210"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ol</span> <span class="attr">class</span>=<span class="string">"breadcrumb"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'home' %&#125;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-home"</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa font-awesome"</span>&gt;</span>Data List<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"active"</span>&gt;</span>data<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.breadcrumb</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="修改body字体"><a href="#修改body字体" class="headerlink" title="修改body字体"></a>修改body字体</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*修改body字体*/</span></span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">font-family</span>: Arial, <span class="string">"Microsoft YaHei"</span>, <span class="string">"微软雅黑"</span>, serif;</span><br><span class="line">    <span class="comment">/*font-size: 16px;*/</span></span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="插入icons"><a href="#插入icons" class="headerlink" title="插入icons"></a>插入icons</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-area-chart"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="mac删除定时任务"><a href="#mac删除定时任务" class="headerlink" title="mac删除定时任务"></a>mac删除定时任务</h3><p>crontab -e进入配置文件，删除以下自动换桌面命令</p><p><code>0 12 * * 1 /bin/bash /Users/qiangweizhou/tools/Mac-command-wallpaper/wallpaper randweb com</code></p><h2 id="表格信息excel批量导入mysql"><a href="#表格信息excel批量导入mysql" class="headerlink" title="表格信息excel批量导入mysql"></a>表格信息excel批量导入mysql</h2><p><code>loadexcel2mysql.py</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql.cursors <span class="comment">#用来操作数据库  参考地址： https://pypi.org/project/PyMySQL/#downloads 如果报错请按照</span></span><br><span class="line">这个链接安装 pip3 install PyMySQL</span><br><span class="line"><span class="comment">#import xlrd # 用来读excel 参考地址: https://www.cnblogs.com/MrLJC/p/3715783.html</span></span><br><span class="line"><span class="keyword">from</span> openpyxl <span class="keyword">import</span> load_workbook <span class="comment"># 可以支持xlsx的工具,https://www.cnblogs.com/anpengapple/p/6399304.html?utm</span></span><br><span class="line">_source=itdadao&amp;utm_medium=referral</span><br><span class="line"><span class="keyword">import</span> os <span class="comment"># 用来度文件 参考地址: https://www.cnblogs.com/mufenglin/p/7676160.html</span></span><br><span class="line"><span class="keyword">import</span> re <span class="comment"># 正则表达式模块  参考地址: http://www.runoob.com/python/python-reg-expressions.html</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接数据库</span></span><br><span class="line">connection = pymysql.connect(host=<span class="string">'localhost'</span>, <span class="comment"># 数据库地址</span></span><br><span class="line">                             user=<span class="string">'root'</span>,       <span class="comment"># 数据库用户名</span></span><br><span class="line">                             password=<span class="string">'qiangwei12'</span>,<span class="comment"># 数据库密码</span></span><br><span class="line">                             db=<span class="string">'django_mysql'</span>,         <span class="comment"># 数据库名称</span></span><br><span class="line">                             charset=<span class="string">'utf8mb4'</span>,</span><br><span class="line">                             cursorclass=pymysql.cursors.DictCursor)</span><br><span class="line"></span><br><span class="line">cursor = connection.cursor()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据库</span></span><br><span class="line">tablename = <span class="string">'GSMid'</span></span><br><span class="line"><span class="comment">#sql = "CREATE TABLE `"+tablename+"` (`pmid` int(11) NOT NULL,`article_title` varchar(1024) DEFAULT NULL,`auth</span></span><br><span class="line">or_list` varchar(<span class="number">1024</span>) DEFAULT NULL,`abstract_text` text DEFAULT NULL,`keywords` varchar(<span class="number">1025</span>) DEFAULT NULL,`p</span><br><span class="line">mcid` char(<span class="number">255</span>) DEFAULT NULL,`pub_med_pub_date` char(<span class="number">255</span>) DEFAULT NULL,`journal_issue` char(<span class="number">255</span>) DEFAULT NULL,</span><br><span class="line">`serch_text` char(<span class="number">255</span>) DEFAULT NULL) ENGINE=MyISAM DEFAULT CHARSET=utf8<span class="string">"</span></span><br><span class="line"><span class="string">#cursor.execute("</span>DROP TABLE IF EXISTS `<span class="string">"+tablename+"</span>`<span class="string">")</span></span><br><span class="line"><span class="string">#cursor.execute(sql)</span></span><br><span class="line"><span class="string">#connection.commit()</span></span><br><span class="line"><span class="string">count=0</span></span><br><span class="line"><span class="string"># 遍历目录</span></span><br><span class="line"><span class="string">basedir = '/Users/qiangweizhou/科研/DNA甲基化数据库/data_result/organism/'</span></span><br><span class="line"><span class="string">rootdir = os.listdir(basedir)</span></span><br><span class="line"><span class="string">#for subdir in rootdir: # 遍历第一层目录 1 2 3 4 5 6</span></span><br><span class="line"><span class="string">#    if os.path.isdir(subdir):</span></span><br><span class="line"><span class="string">#        subrootdir = os.listdir(basedir+subdir)</span></span><br><span class="line"><span class="string">for files in rootdir: # 遍历第二层目录 如 1下面的目录</span></span><br><span class="line"><span class="string">    print(os.path.splitext(files)[0])</span></span><br><span class="line"><span class="string">    if files[0]!='~' and os.path.splitext(files)[1]=='.xlsx': # 如果是excel文件</span></span><br><span class="line"><span class="string">        # data = xlrd.open_workbook(basedir+subdir+'/'+files)</span></span><br><span class="line"><span class="string">        # table = data.sheets()[0]</span></span><br><span class="line"><span class="string">        wb = load_workbook(basedir+files)</span></span><br><span class="line"><span class="string">        table = wb.get_sheet_by_name("</span>Sheet1<span class="string">")</span></span><br><span class="line"><span class="string">        print("</span>导入<span class="string">",basedir+files,"</span>数据中,已经导入<span class="string">",count,"</span>条数据<span class="string">")</span></span><br><span class="line"><span class="string">        ##### 下面的方法是一个excel运行一次插入语句，经验证太慢，一个excel导入耗时超过3分钟</span></span><br><span class="line"><span class="string">        # thissql = 'insert into '+tablename+' values '</span></span><br><span class="line"><span class="string">        # for row in range(1,table.nrows):</span></span><br><span class="line"><span class="string">        #     value = '('</span></span><br><span class="line"><span class="string">        #     for col in range(0,9):</span></span><br><span class="line"><span class="string">        #         value += "</span><span class="string">'"+str(table.cell(row,col).value)+"'</span>,<span class="string">"</span></span><br><span class="line"><span class="string">        #     value = value[:(len(value)-1)]+"</span>),<span class="string">"</span></span><br><span class="line"><span class="string">        #     thissql +=value</span></span><br><span class="line"><span class="string">        # thissql = thissql[:(len(thissql))]</span></span><br><span class="line"><span class="string">        # cursor.execute(thissql)</span></span><br><span class="line"><span class="string">        # connection.commit()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        ##### 下面的方法是一行运行一次插入语句</span></span><br><span class="line"><span class="string">        thissql = 'insert into '+tablename+' values(%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)'</span></span><br><span class="line"><span class="string">        for row in range(2,table.max_row+1): ## table.max_row+1因为range是开合的，需要+1</span></span><br><span class="line"><span class="string">            #print(table.cell(row=row,column=1).value, table.max_row, row)</span></span><br><span class="line"><span class="string">            if table.cell(row=row,column=1).value == "</span>N<span class="string">":</span></span><br><span class="line"><span class="string">                continue</span></span><br><span class="line"><span class="string">            organism=(table.cell(row=row,column=8).value)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            Source=(table.cell(row=row,column=10).value).split('&lt;a href', 1)[0]</span></span><br><span class="line"><span class="string">            if Source.find(';'):</span></span><br><span class="line"><span class="string">                Source=(Source).split(';', 1)[1] ## 爬虫时候title+sample，去掉title部分</span></span><br><span class="line"><span class="string">            if len(Source) &gt; 500:</span></span><br><span class="line"><span class="string">                Source = Source[0:500]</span></span><br><span class="line"><span class="string">            #print(Source)</span></span><br><span class="line"><span class="string">            cursor.execute(thissql,(</span></span><br><span class="line"><span class="string">            table.cell(row=row,column=3).value,</span></span><br><span class="line"><span class="string">            table.cell(row=row,column=1).value,</span></span><br><span class="line"><span class="string">            table.cell(row=row,column=4).value,</span></span><br><span class="line"><span class="string">            table.cell(row=row,column=5).value,</span></span><br><span class="line"><span class="string">            table.cell(row=row,column=6).value,</span></span><br><span class="line"><span class="string">            table.cell(row=row,column=7).value,</span></span><br><span class="line"><span class="string">            organism,</span></span><br><span class="line"><span class="string">            table.cell(row=row,column=9).value,</span></span><br><span class="line"><span class="string">            Source,table.cell(row=row,column=11).value,))</span></span><br><span class="line"><span class="string">            count+=1</span></span><br><span class="line"><span class="string">        connection.commit()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">print('批量导入数据完毕，共导入:',count,'条数据')</span></span><br><span class="line"><span class="string"># 关闭数据库</span></span><br><span class="line"><span class="string">connection.close()</span></span><br></pre></td></tr></table></figure><p>首先清空数据库table</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">use django_mysql</span><br><span class="line">show tables; #查看表格</span><br><span class="line">select * from GSMid; #显示内容</span><br><span class="line">TRUNCATE TABLE GSMid; #情况</span><br></pre></td></tr></table></figure><p>运行导入到mysql：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python loadexcel2mysql.py</span><br></pre></td></tr></table></figure><h2 id="Show-5-entries"><a href="#Show-5-entries" class="headerlink" title="Show 5 entries"></a>Show 5 entries</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"&#123;% static 'MethAelle/vendor/datatables/js/jquery.dataTables.js' %&#125;"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>文件路径：<code>MethAelle/vendor/datatables/js/jquery.dataTables.js</code></p><p>首先在选项中添加5，<code>&quot;aLengthMenu&quot;: [ 5, 10, 25, 50, 100 ],</code></p><p><img src="/2019/04/03/project-alleleweb/image-20190319103124461.png" alt="image-20190319103124461"></p><p>修改<code>iDisplayLength</code>为5，默认长度</p><p><img src="/2019/04/03/project-alleleweb/image-20190319102900921.png" alt="image-20190319102900921"></p><h3 id="控制table不超出div"><a href="#控制table不超出div" class="headerlink" title="控制table不超出div"></a>控制table不超出div</h3><p>在table上层div添加<code>overflow: auto;</code></p><p>文档：<code>table.html</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel panel-primary"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-heading"</span>&gt;</span>&#123;&#123;Organism&#125;&#125; Datasets List<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-body"</span> <span class="attr">style</span>=<span class="string">"overflow: auto;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"row"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- end col-left --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-md-12"</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="jquery-datatables"><a href="#jquery-datatables" class="headerlink" title="jquery.datatables"></a>jquery.datatables</h2><h3 id="第一列可以显示内容"><a href="#第一列可以显示内容" class="headerlink" title="第一列可以显示内容"></a>第一列可以显示内容</h3><p>文件：<code>table.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将第一列data:null替换</span></span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dt = $(<span class="string">'#tabledatalistid'</span>).DataTable( &#123;</span><br><span class="line">        <span class="comment">// "processing": true,</span></span><br><span class="line">        <span class="comment">// "serverSide": true,</span></span><br><span class="line">        <span class="string">"ajax"</span>: <span class="string">""</span>, <span class="comment">//   /static/MethAelle/data/objects.txt</span></span><br><span class="line">        <span class="string">"columns"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"class"</span>:          <span class="string">"details-control"</span>,</span><br><span class="line">                <span class="string">"orderable"</span>:      <span class="literal">false</span>,</span><br><span class="line">                <span class="string">"data"</span>:           <span class="string">"visul"</span>, <span class="comment">//numm</span></span><br><span class="line">                <span class="string">"defaultContent"</span>: <span class="string">""</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Geoid"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"sra"</span>,</span><br><span class="line">              <span class="string">"visible"</span>: <span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Library"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Source"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Layout"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Bases"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Organization"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Instrument"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Title"</span> &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">"order"</span>: [[<span class="number">1</span>, <span class="string">'asc'</span>]]</span><br><span class="line">    &#125; );</span><br></pre></td></tr></table></figure><p><code>table.html</code>内添加内容 （添加的是<i>图标）</i></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#123;% for gsm in gsmlist %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'jbrowse' %&#125;"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-area-chart"</span> <span class="attr">aria-hidden</span>=<span class="string">"false"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'jbrowse' %&#125;"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-pie-chart"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'jbrowse' %&#125;"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-venus-mars"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-th-list"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.ncbi.nlm.nih.gov/geo/query/acc.cgi?acc=&#123;&#123;gsm.Geoid&#125;&#125;"</span>&gt;</span></span><br><span class="line">            &#123;&#123;gsm.Geoid&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"https://www.ncbi.nlm.nih.gov/sra/&#123;&#123;gsm.sra&#125;&#125;"</span>&gt;</span></span><br><span class="line">            &#123;&#123;gsm.sra&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Library&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Source&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Layout&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Bases&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Organization&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Instrument&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;gsm.Title&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">&#123;% endfor %&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/04/03/project-alleleweb/image-20190319161459294.png" alt="image-20190319161459294"></p><h3 id="第三列隐藏，并显示在第一列点击后出现"><a href="#第三列隐藏，并显示在第一列点击后出现" class="headerlink" title="第三列隐藏，并显示在第一列点击后出现"></a>第三列隐藏，并显示在第一列点击后出现</h3><p>修改<code>table.js</code>内第三列，添加<code>&quot;visible&quot;: false</code>，内容可查看上一节</p><p>第一列点击出现：</p><p>修改<code>table.js</code>：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//format d.sra 显示第三列sra内容</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">format</span> (<span class="params"> d </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'The child row is a SRA list: '</span> + d.sra;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">$(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dt = $(<span class="string">'#tabledatalistid'</span>).DataTable( &#123;</span><br><span class="line">        <span class="comment">// "processing": true,</span></span><br><span class="line">        <span class="comment">// "serverSide": true,</span></span><br><span class="line">        <span class="string">"ajax"</span>: <span class="string">""</span>, <span class="comment">//   /static/MethAelle/data/objects.txt</span></span><br><span class="line">        <span class="string">"columns"</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">"class"</span>:          <span class="string">"details-control"</span>,</span><br><span class="line">                <span class="string">"orderable"</span>:      <span class="literal">false</span>,</span><br><span class="line">                <span class="string">"data"</span>:           <span class="string">"visul"</span>,</span><br><span class="line">                <span class="string">"defaultContent"</span>: <span class="string">""</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Geoid"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"sra"</span>,</span><br><span class="line">              <span class="string">"visible"</span>: <span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Library"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Source"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Layout"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Bases"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Organization"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Instrument"</span> &#125;,</span><br><span class="line">            &#123; <span class="string">"data"</span>: <span class="string">"Title"</span> &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">"order"</span>: [[<span class="number">1</span>, <span class="string">'asc'</span>]]</span><br><span class="line">    &#125; );</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Array to track the ids of the details displayed rows</span></span><br><span class="line">    <span class="keyword">var</span> detailRows = [];</span><br><span class="line">     $(<span class="string">'#tabledatalistid tbody'</span>).on( <span class="string">'click'</span>, <span class="string">'tr td.details-control'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> tr = $(<span class="keyword">this</span>).closest(<span class="string">'tr'</span>);</span><br><span class="line">        <span class="keyword">var</span> row = dt.row( tr );</span><br><span class="line">        <span class="keyword">var</span> idx = $.inArray( tr.attr(<span class="string">'id'</span>), detailRows );</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> ( row.child.isShown() ) &#123;</span><br><span class="line">            tr.removeClass( <span class="string">'details'</span> );</span><br><span class="line">            row.child.hide();</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// Remove from the 'open' array</span></span><br><span class="line">            detailRows.splice( idx, <span class="number">1</span> );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            tr.addClass( <span class="string">'details'</span> );</span><br><span class="line">            row.child( format( row.data() ) ).show();</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// Add to the 'open' array</span></span><br><span class="line">            <span class="keyword">if</span> ( idx === <span class="number">-1</span> ) &#123;</span><br><span class="line">                detailRows.push( tr.attr(<span class="string">'id'</span>) );</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; );</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    <span class="comment">// On each draw, loop over the `detailRows` array and show any child rows</span></span><br><span class="line">    dt.on( <span class="string">'draw'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $.each( detailRows, <span class="function"><span class="keyword">function</span> (<span class="params"> i, id </span>) </span>&#123;</span><br><span class="line">            $(<span class="string">'#'</span>+id+<span class="string">' td.details-control'</span>).trigger( <span class="string">'click'</span> );</span><br><span class="line">        &#125; );</span><br><span class="line">    &#125; );</span><br><span class="line"></span><br><span class="line">&#125; );</span><br></pre></td></tr></table></figure><p><img src="/2019/04/03/project-alleleweb/image-20190319162102042.png" alt="image-20190319162102042"></p><h3 id="去掉边框，底线变绿色"><a href="#去掉边框，底线变绿色" class="headerlink" title="去掉边框，底线变绿色"></a>去掉边框，底线变绿色</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#methnavmenu</span>&#123;   </span><br><span class="line">	<span class="attribute">border-width</span>: <span class="number">0px</span>;</span><br><span class="line">	<span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#099722</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/04/03/project-alleleweb/alleleweb-log.png" alt="image-20190321095447714"></p><h3 id="边角弧度"><a href="#边角弧度" class="headerlink" title="边角弧度"></a>边角弧度</h3><p>需要添加到div下</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#bs-example-navmenu-collapse-1</span>&#123;</span><br><span class="line">	<span class="attribute">border-radius</span>: <span class="number">6px</span>;</span><br><span class="line">	<span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#099722</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="navbar选择list下某一网页，需要激活li"><a href="#navbar选择list下某一网页，需要激活li" class="headerlink" title="navbar选择list下某一网页，需要激活li"></a>navbar选择list下某一网页，需要激活li</h3><p>实现效果如下：</p><p><img src="/2019/04/03/project-alleleweb/image-20190321110908996.png" alt="image-20190321110908996"></p><p>在file网页中添加：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">&lt;!-- navbar --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// $('#nav_file').click(function (e) &#123;</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//e.preventDefault();</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// $('#nav_file').removeClass('active');</span></span></span><br><span class="line"><span class="javascript">  $(<span class="string">'#navbar_analysis'</span>).addClass(<span class="string">'active'</span>);</span></span><br><span class="line"><span class="undefined">  &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>对应navbar中：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Analysis --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"dropdown"</span> <span class="attr">id</span>=<span class="string">"navbar_analysis"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'table' %&#125;"</span> <span class="attr">class</span>=<span class="string">"dropdown-toggle"</span> <span class="attr">data-toggle</span>=<span class="string">"dropdown"</span> <span class="attr">role</span>=<span class="string">"button"</span> <span class="attr">aria-haspopup</span>=<span class="string">"true"</span> <span class="attr">aria-expanded</span>=<span class="string">"false"</span>&gt;</span>Analysis/ Function <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"caret"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &lt;a href="&#123;% url 'table' %&#125;" role="button" &gt;Table &lt;span class="caret"&gt;&lt;/span&gt;&lt;/a&gt; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"dropdown-menu"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'file' %&#125;"</span>&gt;</span>Allele Meth visulization<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>ASM analysis<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>Differential analysis<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">"separator"</span> <span class="attr">class</span>=<span class="string">"divider"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>One more separated link<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="RNAseq不显示BatMeth2网页结果，因此需要判断数据类型"><a href="#RNAseq不显示BatMeth2网页结果，因此需要判断数据类型" class="headerlink" title="RNAseq不显示BatMeth2网页结果，因此需要判断数据类型"></a>RNAseq不显示BatMeth2网页结果，因此需要判断数据类型</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if gsm.Library == "Bisulfite-Seq" %&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">href</span>=<span class="string">"&#123;% url 'jbrowse' %&#125;"</span>&gt;</span> <span class="comment">&lt;!--batmeth2 results--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-pie-chart"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/04/03/project-alleleweb/image-20190321115609628.png" alt="image-20190321115609628"></p><h2 id="django-send-email-发邮件"><a href="#django-send-email-发邮件" class="headerlink" title="django send email 发邮件"></a>django send email 发邮件</h2><p>设置app下的setting.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## send e-mail</span></span><br><span class="line">EMAIL_BACKEND = <span class="string">'django.core.mail.backends.smtp.EmailBackend'</span>  <span class="comment">#email后端</span></span><br><span class="line">EMAIL_USE_TLS = <span class="keyword">False</span>   <span class="comment">#是否使用TLS安全传输协议</span></span><br><span class="line">EMAIL_USE_SSL = <span class="keyword">True</span>    <span class="comment">#是否使用SSL加密，qq企业邮箱要求使用</span></span><br><span class="line">EMAIL_HOST = <span class="string">'smtp.qq.com'</span>   <span class="comment">#发送邮件的邮箱 的 SMTP服务器，这里用了qq企业邮箱</span></span><br><span class="line">EMAIL_PORT = <span class="number">465</span>     <span class="comment">#发件箱的SMTP服务器端口 or 25</span></span><br><span class="line">EMAIL_HOST_USER = <span class="string">'1010170266@qq.com'</span>    <span class="comment">#发送邮件的邮箱地址</span></span><br><span class="line">EMAIL_HOST_PASSWORD = <span class="string">'ksglqeziekpibdeh'</span>         <span class="comment">#发送邮件的邮箱密码，账号的密码必须是授权码，忘了的可以在qq邮箱里面设置，把已关闭 |  开启 IMAP/SMTP服务</span></span><br></pre></td></tr></table></figure><p>view. py中添加：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.core.mail <span class="keyword">import</span> send_mail</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendMessage</span><span class="params">(request)</span>:</span>  </span><br><span class="line">    request.encoding=<span class="string">'utf-8'</span></span><br><span class="line">    <span class="keyword">print</span> (request.GET)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'name'</span> <span class="keyword">in</span> request.GET:</span><br><span class="line">        name = request.GET[<span class="string">'name'</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'subject_title'</span> <span class="keyword">in</span> request.GET:</span><br><span class="line">        Subject = request.GET[<span class="string">'subject_title'</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'email'</span> <span class="keyword">in</span> request.GET:</span><br><span class="line">        email = request.GET[<span class="string">'email'</span>]</span><br><span class="line">    <span class="keyword">if</span> <span class="string">'message'</span> <span class="keyword">in</span> request.GET:</span><br><span class="line">        message = email + <span class="string">"\n"</span> + request.GET[<span class="string">'message'</span>]</span><br><span class="line">    send_mail(</span><br><span class="line">        Subject,</span><br><span class="line">        message,</span><br><span class="line">        <span class="string">'1010170266@qq.com'</span>,</span><br><span class="line">        [<span class="string">'1010170266@qq.com'</span>],</span><br><span class="line">        </span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'MethAelle/contact.html'</span>, &#123;<span class="string">"message"</span>:<span class="string">"Send successful, thanks! We will check your message asap."</span>&#125;)</span><br></pre></td></tr></table></figure><h3 id="添加横线"><a href="#添加横线" class="headerlink" title="添加横线"></a>添加横线</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">margin-top</span>: 0;</span><br></pre></td></tr></table></figure><h3 id="响应式布局中重要的meta标签设置-适用于手机浏览器兼容性设置"><a href="#响应式布局中重要的meta标签设置-适用于手机浏览器兼容性设置" class="headerlink" title="响应式布局中重要的meta标签设置.适用于手机浏览器兼容性设置"></a>响应式布局中重要的meta标签设置.适用于手机浏览器兼容性设置</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- #手机浏览器兼容性设置 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"application/xhtml+xml;charset=UTF-8"</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"no-cache,must-revalidate"</span> <span class="attr">http-equiv</span>=<span class="string">"Cache-Control"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"no-cache"</span> <span class="attr">http-equiv</span>=<span class="string">"pragma"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"0"</span> <span class="attr">http-equiv</span>=<span class="string">"expires"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"telephone=no, address=no"</span> <span class="attr">name</span>=<span class="string">"format-detection"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span> <span class="attr">name</span>=<span class="string">"viewport"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-capable"</span> <span class="attr">content</span>=<span class="string">"yes"</span> /&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-status-bar-style"</span> <span class="attr">content</span>=<span class="string">"black-translucent"</span> /&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- #手机浏览器兼容性设置 --&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">粘贴到顶部后和原来的meta标签对齐.</span><br><span class="line">可以实现响应式布局.</span><br></pre></td></tr></table></figure><h3 id="手机模式下拉菜单关闭不了，点击后只是闪烁一下"><a href="#手机模式下拉菜单关闭不了，点击后只是闪烁一下" class="headerlink" title="手机模式下拉菜单关闭不了，点击后只是闪烁一下"></a>手机模式下拉菜单关闭不了，点击后只是闪烁一下</h3><p><img src="/2019/04/03/project-alleleweb/image-20190324145341353.png" alt="image-20190324145341353"></p><p>发现在custom.css内设置了格式如下，删除后正常。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#bs-example-navmenu-collapse-1</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">background-size</span>: cover;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">  background-image: url('/static/MethAelle/img/2.jpg');</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: -<span class="number">15px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="发现手机中菜单栏，点不开，一点就关闭"><a href="#发现手机中菜单栏，点不开，一点就关闭" class="headerlink" title="发现手机中菜单栏，点不开，一点就关闭"></a>发现手机中菜单栏，点不开，一点就关闭</h3><p>解决：是bootstrap3.3.7中的bug，替换为4.1.0后正常</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 最新的 Bootstrap 核心 JavaScript 文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"</span> <span class="attr">integrity</span>=<span class="string">"sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>删除：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"</span> <span class="attr">integrity</span>=<span class="string">"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>修改文件：file、table、jbrowse、gragh</p><p>其他文件未调用该bootstrap，所以不存在问题。</p></div><div><div style="text-align:center;color:#ccc;font-size:14px"> ------ The Happy Ending -----</div></div><div><div class="my_post_copyright"><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script><script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script><p><span>本文标题:</span><a href="/2019/04/03/project-alleleweb/">project_alleleweb</a></p><p><span>文章作者:</span><a href="/" title="访问 Qiangwei 的个人博客">Qiangwei</a></p><p><span>发布时间:</span>2019年04月03日 - 15:04</p><p><span>最后更新:</span>2019年05月09日 - 20:05</p><p><span>原始链接:</span><a href="/2019/04/03/project-alleleweb/" title="project_alleleweb">https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/</a><span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://zhouqiangwei.github.io/2019/04/03/project-alleleweb/" aria-label="复制成功！"></i></span></p><p> 转载请保留原文链接及作者。</p></div><script>var clipboard=new Clipboard(".fa-clipboard");$(".fa-clipboard").click(function(){clipboard.on("success",function(){swal({title:"",text:"复制成功",icon:"success",showConfirmButton:!0})})})</script></div><footer class="post-footer"><div class="post-tags"><a href="/tags/project/" rel="tag"><i class="fa fa-tag"></i> project</a><a href="/tags/alleleweb/" rel="tag"><i class="fa fa-tag"></i> alleleweb</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2019/04/03/project-methhap/" rel="next" title="project_methhap"><i class="fa fa-chevron-left"></i> project_methhap</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/2019/04/03/project-batmeth2/" rel="prev" title="project_batmeth2">project_batmeth2<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Qiangwei"><p class="site-author-name" itemprop="name">Qiangwei</p><p class="site-description motion-element" itemprop="description">顺风不浪 逆风不怂</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">47</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/index.html"><span class="site-state-item-count">24</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">59</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/ZhouQiangwei" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://www.zhihu.com/people/qiang-wei-97-1/activities" target="_blank" title="知乎"><i class="fa fa-fw fa-gratipay"></i> 知乎</a></span><span class="links-of-author-item"><a href="mailto:qiangwei.zhou2013@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i> E-Mail</a></span></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Allele-数据库"><span class="nav-number">1.</span> <span class="nav-text">Allele 数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#功能"><span class="nav-number">1.1.</span> <span class="nav-text">功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置uwsgim-nginx"><span class="nav-number">1.2.</span> <span class="nav-text">配置uwsgim nginx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#django项目-http到https"><span class="nav-number">1.3.</span> <span class="nav-text">django项目 http到https</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置uwsgim-nginx-错误"><span class="nav-number">1.4.</span> <span class="nav-text">配置uwsgim nginx 错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#js中替换src，刷新问题"><span class="nav-number">1.5.</span> <span class="nav-text">js中替换src，刷新问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mysql-更改密码"><span class="nav-number">1.6.</span> <span class="nav-text">mysql 更改密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#包含的物种和处理进程"><span class="nav-number">1.7.</span> <span class="nav-text">包含的物种和处理进程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Data-list"><span class="nav-number">1.8.</span> <span class="nav-text">Data list</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#测试转bigwig格式"><span class="nav-number">1.9.</span> <span class="nav-text">测试转bigwig格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RNAseq-分析流程"><span class="nav-number">1.10.</span> <span class="nav-text">RNAseq 分析流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BS-Seq数据分析"><span class="nav-number">1.11.</span> <span class="nav-text">BS-Seq数据分析</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Django-Mysql"><span class="nav-number">2.</span> <span class="nav-text">Django Mysql</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装mysql-in-mac"><span class="nav-number">2.1.</span> <span class="nav-text">安装mysql in mac</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更改密码"><span class="nav-number">2.2.</span> <span class="nav-text">更改密码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Enter-password-ERROR-2002-HY000-Can’t-connect-to-local-MySQL"><span class="nav-number">2.3.</span> <span class="nav-text">Enter password: ERROR 2002 (HY000): Can’t connect to local MySQL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装pymysql"><span class="nav-number">2.4.</span> <span class="nav-text">安装pymysql</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改settings-py"><span class="nav-number">2.5.</span> <span class="nav-text">修改settings.py</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#配置init-py"><span class="nav-number">2.6.</span> <span class="nav-text">配置init.py</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在app文件的models-py文件中-创建数据表（GSEid）"><span class="nav-number">2.7.</span> <span class="nav-text">在app文件的models.py文件中 创建数据表（GSEid）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#在利用models-py文件生成数据库表之前，手动的先创建数据库"><span class="nav-number">2.8.</span> <span class="nav-text">在利用models.py文件生成数据库表之前，手动的先创建数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#终端运行命令"><span class="nav-number">2.9.</span> <span class="nav-text">终端运行命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看我们的django-mysql数据库，其中GSMid就是用models文件生成的表，其他的表是项目自动生成的，可以先不用管"><span class="nav-number">2.10.</span> <span class="nav-text">查看我们的django_mysql数据库，其中GSMid就是用models文件生成的表，其他的表是项目自动生成的，可以先不用管</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表结构-desc查看表结构"><span class="nav-number">2.11.</span> <span class="nav-text">表结构,desc查看表结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#接下来用代码的方式演示一下Django如何进行增删改查"><span class="nav-number">2.12.</span> <span class="nav-text">接下来用代码的方式演示一下Django如何进行增删改查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增加数据-views-py"><span class="nav-number">2.13.</span> <span class="nav-text">增加数据 (views.py)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#urls-py-文件中-urlpatterns中配置"><span class="nav-number">2.14.</span> <span class="nav-text">urls.py 文件中 urlpatterns中配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看是否插入成功"><span class="nav-number">2.15.</span> <span class="nav-text">查看是否插入成功</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查询数据"><span class="nav-number">2.16.</span> <span class="nav-text">查询数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除数据"><span class="nav-number">2.17.</span> <span class="nav-text">删除数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改显示mysql到table"><span class="nav-number">3.</span> <span class="nav-text">修改显示mysql到table</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#修改views-py"><span class="nav-number">3.1.</span> <span class="nav-text">修改views.py</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改table-js"><span class="nav-number">3.2.</span> <span class="nav-text">修改table.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改table-html"><span class="nav-number">3.3.</span> <span class="nav-text">修改table.html</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参考：-https-www-jb51-net-article-151269-htm"><span class="nav-number">3.4.</span> <span class="nav-text">参考： https://www.jb51.net/article/151269.htm</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#navmenu"><span class="nav-number">4.</span> <span class="nav-text">navmenu</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#主页下拉菜单点击后背景变成灰色，设置为透明色（如下）"><span class="nav-number">4.1.</span> <span class="nav-text">主页下拉菜单点击后背景变成灰色，设置为透明色（如下）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实现三级菜单"><span class="nav-number">4.2.</span> <span class="nav-text">实现三级菜单</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主页添加描述内容"><span class="nav-number">4.3.</span> <span class="nav-text">主页添加描述内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#navbar-三级菜单选中颜色"><span class="nav-number">4.4.</span> <span class="nav-text">navbar 三级菜单选中颜色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加位置标示"><span class="nav-number">4.5.</span> <span class="nav-text">添加位置标示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改body字体"><span class="nav-number">4.6.</span> <span class="nav-text">修改body字体</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#插入icons"><span class="nav-number">4.7.</span> <span class="nav-text">插入icons</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#mac删除定时任务"><span class="nav-number">4.8.</span> <span class="nav-text">mac删除定时任务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#表格信息excel批量导入mysql"><span class="nav-number">5.</span> <span class="nav-text">表格信息excel批量导入mysql</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Show-5-entries"><span class="nav-number">6.</span> <span class="nav-text">Show 5 entries</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#控制table不超出div"><span class="nav-number">6.1.</span> <span class="nav-text">控制table不超出div</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#jquery-datatables"><span class="nav-number">7.</span> <span class="nav-text">jquery.datatables</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一列可以显示内容"><span class="nav-number">7.1.</span> <span class="nav-text">第一列可以显示内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第三列隐藏，并显示在第一列点击后出现"><span class="nav-number">7.2.</span> <span class="nav-text">第三列隐藏，并显示在第一列点击后出现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#去掉边框，底线变绿色"><span class="nav-number">7.3.</span> <span class="nav-text">去掉边框，底线变绿色</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#边角弧度"><span class="nav-number">7.4.</span> <span class="nav-text">边角弧度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#navbar选择list下某一网页，需要激活li"><span class="nav-number">7.5.</span> <span class="nav-text">navbar选择list下某一网页，需要激活li</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RNAseq不显示BatMeth2网页结果，因此需要判断数据类型"><span class="nav-number">7.6.</span> <span class="nav-text">RNAseq不显示BatMeth2网页结果，因此需要判断数据类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#django-send-email-发邮件"><span class="nav-number">8.</span> <span class="nav-text">django send email 发邮件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#添加横线"><span class="nav-number">8.1.</span> <span class="nav-text">添加横线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#响应式布局中重要的meta标签设置-适用于手机浏览器兼容性设置"><span class="nav-number">8.2.</span> <span class="nav-text">响应式布局中重要的meta标签设置.适用于手机浏览器兼容性设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#手机模式下拉菜单关闭不了，点击后只是闪烁一下"><span class="nav-number">8.3.</span> <span class="nav-text">手机模式下拉菜单关闭不了，点击后只是闪烁一下</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#发现手机中菜单栏，点不开，一点就关闭"><span class="nav-number">8.4.</span> <span class="nav-text">发现手机中菜单栏，点不开，一点就关闭</span></a></li></ol></li></ol></div></div></section><div id="music163player"><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=32364032&auto=0&height=66"></iframe></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="copyright">&copy; 2018 &mdash; <span itemprop="copyrightYear">2019</span><span class="with-love" id="animate"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">Qiangwei</span></div><div class="powered-by"><i class="fa fa-user-md"></i> <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span> <span id="busuanzi_container_site_uv">| 本站访问<span id="busuanzi_value_site_uv"></span>人次</span></div><div class="theme-info"><div class="powered-by"></div> <span class="post-count">| 博客全站共49.3k字</span></div><div style="display:none"><script src="//s95.cnzz.com/z_stat.php?id=1274106223&web_id=1274106223" language="JavaScript"></script></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/affix.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script type="text/javascript">var GUEST=["nick","mail","link"],guest="nick,mail,link";guest=guest.split(",").filter(function(e){return-1<GUEST.indexOf(e)}),new Valine({el:"#comments",verify:!1,notify:!1,appId:"L6lf5Fu6idkKfdhjKT1WmTbQ-gzGzoHsz",appKey:"WIycEuuCj4CnQLrJUlWHvPae",placeholder:"Just go",avatar:"mm",guest_info:guest,pageSize:"10"})</script><script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("L6lf5Fu6idkKfdhjKT1WmTbQ-gzGzoHsz","WIycEuuCj4CnQLrJUlWHvPae")</script><script>function showTime(e){var t=new AV.Query(e),c=[],u=$(".leancloud_visitors");u.each(function(){c.push($(this).attr("id").trim())}),t.containedIn("url",c),t.find().done(function(e){var t=".leancloud-visitors-count";if(0!==e.length){for(var n=0;n<e.length;n++){var o=e[n],i=o.get("url"),s=o.get("time"),r=document.getElementById(i);$(r).find(t).text(s)}for(n=0;n<c.length;n++){i=c[n],r=document.getElementById(i);var l=$(r).find(t);""==l.text()&&l.text(0)}}else u.find(t).text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(i){var e=$(".leancloud_visitors"),s=e.attr("id").trim(),r=e.attr("data-flag-title").trim(),t=new AV.Query(i);t.equalTo("url",s),t.find({success:function(e){if(0<e.length){var t=e[0];t.fetchWhenSave(!0),t.increment("time"),t.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var n=new i,o=new AV.ACL;o.setPublicReadAccess(!0),o.setPublicWriteAccess(!0),n.setACL(o),n.set("title",r),n.set("url",s),n.set("time",1),n.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):1<$(".post-title-link").length&&showTime(e)})</script></body></html>